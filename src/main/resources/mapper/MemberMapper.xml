<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.member.MemberMapper">

  <select id="useridCheck" resultType="Integer">
    select count(*) from member where userid=#{userid}
  </select>
  
  <insert id="memberOk">
    insert into member(userid,name,pwd,email,phone,writeday)
    values(#{userid},#{name},#{pwd},#{email},#{phone},now())
  </insert>
  
  <select id="getReservations" resultType="com.example.demo.member.ResViewDto">
    select r.resId, r.title, pt.showDate as date, pt.showtime as time,
    r.seatIds, r.people, r.totalPrice, r.status from reservation r join
    performance_time pt on r.timeId=pt.timeid where r.memberId=#{memberId}
    order by r.resDate desc
  </select>



</mapper>

